var get_cookie=function(e){var t=null;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),n=0;n<c.length;n++){var o=jQuery.trim(c[n]);if(o.substring(0,e.length+1)==e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t},next_step=function(){var e=$(".active_step:first");0===e.length&&(e=$("input[type='submit']:first")),e[0].scrollIntoView?e[0].scrollIntoView(!0):$("html, body").animate({scrollTop:e.offset().top},"slow")},update_boxes=function(){$(".completed_step input[type='checkbox']").each(function(e,t){t.disabled=1,t.checked=1}),$(".pending_step input[type='checkbox']").each(function(e,t){t.disabled=1,t.checked=0}),$(".active_step input[type='checkbox']").each(function(e,t){t.disabled=0,t.checked=0})},check_project_completion=function(){var e=$(".completed_step").length,t=$(".work_step").length,c=$("input[type='submit']")[0];e==t?c.disabled=0:c.disabled=1},attempt_advance=function(){for(var e=function(){var e=$(".active_step");e.removeClass("active_step"),e.addClass("completed_step");var t=$(".pending_step:first");t&&(t.removeClass("pending_step"),t.addClass("active_step")),update_boxes(),check_project_completion(),next_step()},t=$(".active_step input[type='checkbox']"),c=0,n=0;n<t.length;n+=1)t[n].checked&&(c+=1);var o=c===t.length;if(o&&1==t.length)for(var n=0;n<t[0].classList.length;n+=1)"dummy"==t[0].classList[n]&&(o=!1,e());if(o){var s=$(".active_step .step_id");$.ajax({url:ohai_data.update_url,type:"post",data:{step_id:s.text()},headers:{"X-CSRFToken":get_cookie("csrftoken")}}),e()}},resize_steps=function(){$(".step_content").height($(window).height()-64)},setup=function(){resize_steps(),update_boxes(),check_project_completion(),$(".work_step input[type='checkbox']").change(attempt_advance),next_step()};$(document).ready(setup);